{"ast":null,"code":"import { isNumber } from 'vega-util';\nimport { getViewConfigDiscreteStep } from '../../config';\nimport { isVgRangeStep } from '../../vega.schema';\nimport { getMarkPropOrConfig, signalOrValueRef } from '../common';\nimport * as encode from './encode';\nexport const tick = {\n  vgMark: 'rect',\n  encodeEntry: model => {\n    const {\n      config,\n      markDef\n    } = model;\n    const orient = markDef.orient;\n    const vgSizeChannel = orient === 'horizontal' ? 'width' : 'height';\n    const vgThicknessChannel = orient === 'horizontal' ? 'height' : 'width';\n    return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, encode.baseEncodeEntry(model, {\n      align: 'ignore',\n      baseline: 'ignore',\n      color: 'include',\n      orient: 'ignore',\n      size: 'ignore',\n      theta: 'ignore'\n    })), encode.pointPosition('x', model, {\n      defaultPos: 'mid',\n      vgChannel: 'xc'\n    })), encode.pointPosition('y', model, {\n      defaultPos: 'mid',\n      vgChannel: 'yc'\n    })), encode.nonPosition('size', model, {\n      defaultValue: defaultSize(model),\n      vgChannel: vgSizeChannel\n    })), {\n      [vgThicknessChannel]: signalOrValueRef(getMarkPropOrConfig('thickness', markDef, config))\n    });\n  }\n};\n\nfunction defaultSize(model) {\n  var _a;\n\n  const {\n    config,\n    markDef\n  } = model;\n  const {\n    orient\n  } = markDef;\n  const vgSizeChannel = orient === 'horizontal' ? 'width' : 'height';\n  const scale = model.getScaleComponent(orient === 'horizontal' ? 'x' : 'y');\n  const markPropOrConfig = (_a = getMarkPropOrConfig('size', markDef, config, {\n    vgChannel: vgSizeChannel\n  })) !== null && _a !== void 0 ? _a : config.tick.bandSize;\n\n  if (markPropOrConfig !== undefined) {\n    return markPropOrConfig;\n  } else {\n    const scaleRange = scale ? scale.get('range') : undefined;\n\n    if (scaleRange && isVgRangeStep(scaleRange) && isNumber(scaleRange.step)) {\n      return scaleRange.step * 3 / 4;\n    }\n\n    const defaultViewStep = getViewConfigDiscreteStep(config.view, vgSizeChannel);\n    return defaultViewStep * 3 / 4;\n  }\n}","map":{"version":3,"mappings":"AACA,SAAQA,QAAR,QAAuB,WAAvB;AACA,SAAQC,yBAAR,QAAwC,cAAxC;AACA,SAAQC,aAAR,QAA4B,mBAA5B;AACA,SAAQC,mBAAR,EAA6BC,gBAA7B,QAAoD,WAApD;AAGA,OAAO,KAAKC,MAAZ,MAAwB,UAAxB;AAEA,OAAO,MAAMC,IAAI,GAAiB;EAChCC,MAAM,EAAE,MADwB;EAGhCC,WAAW,EAAGC,KAAD,IAAqB;IAChC,MAAM;MAACC,MAAD;MAASC;IAAT,IAAoBF,KAA1B;IACA,MAAMG,MAAM,GAAGD,OAAO,CAACC,MAAvB;IAEA,MAAMC,aAAa,GAAGD,MAAM,KAAK,YAAX,GAA0B,OAA1B,GAAoC,QAA1D;IACA,MAAME,kBAAkB,GAAGF,MAAM,KAAK,YAAX,GAA0B,QAA1B,GAAqC,OAAhE;IAEA,iFACKP,MAAM,CAACU,eAAP,CAAuBN,KAAvB,EAA8B;MAC/BO,KAAK,EAAE,QADwB;MAE/BC,QAAQ,EAAE,QAFqB;MAG/BC,KAAK,EAAE,SAHwB;MAI/BN,MAAM,EAAE,QAJuB;MAK/BO,IAAI,EAAE,QALyB;MAM/BC,KAAK,EAAE;IANwB,CAA9B,CADL,GAUKf,MAAM,CAACgB,aAAP,CAAqB,GAArB,EAA0BZ,KAA1B,EAAiC;MAACa,UAAU,EAAE,KAAb;MAAoBC,SAAS,EAAE;IAA/B,CAAjC,CAVL,GAWKlB,MAAM,CAACgB,aAAP,CAAqB,GAArB,EAA0BZ,KAA1B,EAAiC;MAACa,UAAU,EAAE,KAAb;MAAoBC,SAAS,EAAE;IAA/B,CAAjC,CAXL,GAcKlB,MAAM,CAACmB,WAAP,CAAmB,MAAnB,EAA2Bf,KAA3B,EAAkC;MACnCgB,YAAY,EAAEC,WAAW,CAACjB,KAAD,CADU;MAEnCc,SAAS,EAAEV;IAFwB,CAAlC,CAdL,GAiBI;MACF,CAACC,kBAAD,GAAsBV,gBAAgB,CAACD,mBAAmB,CAAC,WAAD,EAAcQ,OAAd,EAAuBD,MAAvB,CAApB;IADpC,CAjBJ;EAoBD;AA9B+B,CAA3B;;AAiCP,SAASgB,WAAT,CAAqBjB,KAArB,EAAqC;;;EACnC,MAAM;IAACC,MAAD;IAASC;EAAT,IAAoBF,KAA1B;EACA,MAAM;IAACG;EAAD,IAAWD,OAAjB;EAEA,MAAME,aAAa,GAAGD,MAAM,KAAK,YAAX,GAA0B,OAA1B,GAAoC,QAA1D;EACA,MAAMe,KAAK,GAAGlB,KAAK,CAACmB,iBAAN,CAAwBhB,MAAM,KAAK,YAAX,GAA0B,GAA1B,GAAgC,GAAxD,CAAd;EAEA,MAAMiB,gBAAgB,GACpB,yBAAmB,CAAC,MAAD,EAASlB,OAAT,EAAkBD,MAAlB,EAA0B;IAACa,SAAS,EAAEV;EAAZ,CAA1B,CAAnB,MAAwE,IAAxE,IAAwEiB,aAAxE,GAAwEA,EAAxE,GAA4EpB,MAAM,CAACJ,IAAP,CAAYyB,QAD1F;;EAGA,IAAIF,gBAAgB,KAAKG,SAAzB,EAAoC;IAClC,OAAOH,gBAAP;EACD,CAFD,MAEO;IACL,MAAMI,UAAU,GAAGN,KAAK,GAAGA,KAAK,CAACO,GAAN,CAAU,OAAV,CAAH,GAAwBF,SAAhD;;IACA,IAAIC,UAAU,IAAI/B,aAAa,CAAC+B,UAAD,CAA3B,IAA2CjC,QAAQ,CAACiC,UAAU,CAACE,IAAZ,CAAvD,EAA0E;MACxE,OAAQF,UAAU,CAACE,IAAX,GAAkB,CAAnB,GAAwB,CAA/B;IACD;;IAED,MAAMC,eAAe,GAAGnC,yBAAyB,CAACS,MAAM,CAAC2B,IAAR,EAAcxB,aAAd,CAAjD;IAEA,OAAQuB,eAAe,GAAG,CAAnB,GAAwB,CAA/B;EACD;AACF","names":["isNumber","getViewConfigDiscreteStep","isVgRangeStep","getMarkPropOrConfig","signalOrValueRef","encode","tick","vgMark","encodeEntry","model","config","markDef","orient","vgSizeChannel","vgThicknessChannel","baseEncodeEntry","align","baseline","color","size","theta","pointPosition","defaultPos","vgChannel","nonPosition","defaultValue","defaultSize","scale","getScaleComponent","markPropOrConfig","_a","bandSize","undefined","scaleRange","get","step","defaultViewStep","view"],"sources":["/Users/darcyroche/Documents/cathracha is tíreolaíocht/public life observations/plo-viz-app/node_modules/vega-lite/src/compile/mark/tick.ts"],"sourcesContent":["import {SignalRef} from 'vega';\nimport {isNumber} from 'vega-util';\nimport {getViewConfigDiscreteStep} from '../../config';\nimport {isVgRangeStep} from '../../vega.schema';\nimport {getMarkPropOrConfig, signalOrValueRef} from '../common';\nimport {UnitModel} from '../unit';\nimport {MarkCompiler} from './base';\nimport * as encode from './encode';\n\nexport const tick: MarkCompiler = {\n  vgMark: 'rect',\n\n  encodeEntry: (model: UnitModel) => {\n    const {config, markDef} = model;\n    const orient = markDef.orient;\n\n    const vgSizeChannel = orient === 'horizontal' ? 'width' : 'height';\n    const vgThicknessChannel = orient === 'horizontal' ? 'height' : 'width';\n\n    return {\n      ...encode.baseEncodeEntry(model, {\n        align: 'ignore',\n        baseline: 'ignore',\n        color: 'include',\n        orient: 'ignore',\n        size: 'ignore',\n        theta: 'ignore'\n      }),\n\n      ...encode.pointPosition('x', model, {defaultPos: 'mid', vgChannel: 'xc'}),\n      ...encode.pointPosition('y', model, {defaultPos: 'mid', vgChannel: 'yc'}),\n\n      // size / thickness => width / height\n      ...encode.nonPosition('size', model, {\n        defaultValue: defaultSize(model),\n        vgChannel: vgSizeChannel\n      }),\n      [vgThicknessChannel]: signalOrValueRef(getMarkPropOrConfig('thickness', markDef, config))\n    };\n  }\n};\n\nfunction defaultSize(model: UnitModel): number | SignalRef {\n  const {config, markDef} = model;\n  const {orient} = markDef;\n\n  const vgSizeChannel = orient === 'horizontal' ? 'width' : 'height';\n  const scale = model.getScaleComponent(orient === 'horizontal' ? 'x' : 'y');\n\n  const markPropOrConfig =\n    getMarkPropOrConfig('size', markDef, config, {vgChannel: vgSizeChannel}) ?? config.tick.bandSize;\n\n  if (markPropOrConfig !== undefined) {\n    return markPropOrConfig;\n  } else {\n    const scaleRange = scale ? scale.get('range') : undefined;\n    if (scaleRange && isVgRangeStep(scaleRange) && isNumber(scaleRange.step)) {\n      return (scaleRange.step * 3) / 4;\n    }\n\n    const defaultViewStep = getViewConfigDiscreteStep(config.view, vgSizeChannel);\n\n    return (defaultViewStep * 3) / 4;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}