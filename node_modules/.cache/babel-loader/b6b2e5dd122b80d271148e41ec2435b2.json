{"ast":null,"code":"import _classCallCheck from\"/Users/darcyroche/Documents/cathracha is ti\\u0301reolai\\u0301ocht/public life observations/plo-viz-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/darcyroche/Documents/cathracha is ti\\u0301reolai\\u0301ocht/public life observations/plo-viz-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/darcyroche/Documents/cathracha is ti\\u0301reolai\\u0301ocht/public life observations/plo-viz-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/darcyroche/Documents/cathracha is ti\\u0301reolai\\u0301ocht/public life observations/plo-viz-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/darcyroche/Documents/cathracha is ti\\u0301reolai\\u0301ocht/public life observations/plo-viz-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _toConsumableArray from\"/Users/darcyroche/Documents/cathracha is ti\\u0301reolai\\u0301ocht/public life observations/plo-viz-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React from'react';import{MapContainer,TileLayer,useMap,CircleMarker,Popup}from'react-leaflet';import ScatterPlot from'./Plot.js';import streetGeometries from'./street_locations.json';import streetAttributes from'./street_attributes.json';import chartData from'./chart_data.json';import'./App.css';import'leaflet/dist/leaflet.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var sorted=function sorted(l,ascending){var c=_toConsumableArray(l);c.sort();if(!ascending){c.reverse();}return c;};var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={selectedSite:null,hoveredNode:null};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"handleChange\",value:function handleChange(ID){this.setState({selectedSite:ID});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(SiteLocationsMap,{circleOnClick:function circleOnClick(ID){return _this2.handleChange(ID);}}),/*#__PURE__*/_jsx(\"div\",{id:\"visualisation-pane\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"visualisation-pane-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Walking surveys\"}),this.state.selectedSite&&/*#__PURE__*/_jsx(SiteTitle,{site:this.state.selectedSite}),this.state.selectedSite&&/*#__PURE__*/_jsx(ScatterPlot,{data:chartData[this.state.selectedSite]}),/*#__PURE__*/_jsx(StreetSectionText,{site:this.state.selectedSite}),/*#__PURE__*/_jsx(DatasetInfoText,{})]})})]});}}]);return App;}(React.Component);function SiteLocationsMap(props){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(MapContainer,{id:\"map-pane\",center:[-33.87319087719761,151.20681949733816],zoom:13,zoomControl:false,children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OSM</a> contributors, <a href=\\\"https://carto.com/attributions\\\">CARTO</a>\",url:\"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\"}),streetGeometries.map(function(d){return/*#__PURE__*/_jsx(CircleMarker,{center:[d.latitude,d.longitude],radius:6,fillColor:\"#009800\",fillOpacity:0.8,weight:0,eventHandlers:{click:function click(){return props.circleOnClick(d.street_section_id);}},children:/*#__PURE__*/_jsxs(Popup,{children:[\"Street section ID: \",d.street_section_id]})},d.street_section_id);})]})});}function SiteTitle(props){var s=streetAttributes[props.site];return/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"i\",{children:[s.street_name,\" between \",s.cross_street_a,\" and \",s.cross_street_b,\".\"]})});}function StreetSectionText(props){if(!props.site){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"i\",{children:\"Select a street section by clicking on a green circle marker on the map to view more information about walking movements at that site.\"})})});}var minFlow=Math.min.apply(Math,_toConsumableArray(chartData[props.site].map(function(d){return d.pph;})));var maxFlow=Math.max.apply(Math,_toConsumableArray(chartData[props.site].map(function(d){return d.pph;})));var nUniqueDates=new Set(chartData[props.site].map(function(d){return d.date;})).size;var nUniqueDays=new Set(chartData[props.site].map(function(d){return d.day_of_week;})).size;var earliestHour=sorted(chartData[props.site].map(function(d){return d.time;}),true)[0].substring(0,2);var latestHour=parseInt(sorted(chartData[props.site].map(function(d){return d.time;}),false)[0].substring(0,2))+1;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Between \",minFlow,\" and \",maxFlow,\" people per hour have been surveyed walking through this street section. Surveys have been undertaken across \",nUniqueDates,\" date\",nUniqueDates>1?'s':'',\", including \",nUniqueDays,\" day\",nUniqueDates>1?'s':'',\" of the week, between the hours of \",earliestHour,\":00 and \",latestHour,\":00.\"]})});}function DatasetInfoText(props){var csvLink=\"https://public-life-observations.s3.ap-southeast-2.amazonaws.com/datasets_csv.zip\";var parquetLink=\"https://public-life-observations.s3.ap-southeast-2.amazonaws.com/datasets_parquet.zip\";var ccaLink=\"https://creativecommons.org/licenses/by/4.0/legalcode\";return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"The entire dataset, including disaggregations by footpath and direction, is available to download as \",/*#__PURE__*/_jsx(\"a\",{href:csvLink,children:\"csv\"}),\" or \",/*#__PURE__*/_jsx(\"a\",{href:parquetLink,children:\"parquet\"}),\" files as open data under a \",/*#__PURE__*/_jsx(\"a\",{href:ccaLink,target:\"_blank\",children:\"Creative Commons Attribution 4.0\"}),\" licence.\"]})});}export default App;","map":{"version":3,"names":["React","MapContainer","TileLayer","useMap","CircleMarker","Popup","ScatterPlot","streetGeometries","streetAttributes","chartData","sorted","l","ascending","c","sort","reverse","App","props","state","selectedSite","hoveredNode","handleChange","bind","ID","setState","Component","SiteLocationsMap","map","d","latitude","longitude","click","circleOnClick","street_section_id","SiteTitle","s","site","street_name","cross_street_a","cross_street_b","StreetSectionText","minFlow","Math","min","pph","maxFlow","max","nUniqueDates","Set","date","size","nUniqueDays","day_of_week","earliestHour","time","substring","latestHour","parseInt","DatasetInfoText","csvLink","parquetLink","ccaLink"],"sources":["/Users/darcyroche/Documents/cathracha is tíreolaíocht/public life observations/plo-viz-app/src/App.js"],"sourcesContent":["import React from 'react';\nimport { MapContainer, TileLayer, useMap, CircleMarker, Popup } from 'react-leaflet'\nimport ScatterPlot from './Plot.js';\nimport streetGeometries from './street_locations.json';\nimport streetAttributes from './street_attributes.json';\nimport chartData from './chart_data.json';\nimport './App.css';\nimport 'leaflet/dist/leaflet.css';\n\nconst sorted = (l, ascending) => {\n  let c = [...l];\n  c.sort();\n  if (!ascending) {\n    c.reverse()\n  }\n  return c;\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedSite: null,\n      hoveredNode: null,\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(ID) {\n    this.setState({selectedSite: ID});\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <SiteLocationsMap circleOnClick={(ID) => this.handleChange(ID)} />\n        <div id=\"visualisation-pane\">\n          <div id=\"visualisation-pane-content\">\n            <h1>Walking surveys</h1>\n            {this.state.selectedSite && <SiteTitle site={this.state.selectedSite} />}\n            {this.state.selectedSite && <ScatterPlot data={chartData[this.state.selectedSite]} />}\n            <StreetSectionText site={this.state.selectedSite} />\n            <DatasetInfoText/>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction SiteLocationsMap(props) {\n  return (\n    <div>\n      <MapContainer id=\"map-pane\" center={[-33.87319087719761, 151.20681949733816]} zoom={13} zoomControl={false}>\n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OSM</a> contributors, <a href=\"https://carto.com/attributions\">CARTO</a>'\n        url=\"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\"\n      />\n      {\n        streetGeometries.map((d) => {\n          return (\n            <CircleMarker\n              center={[d.latitude, d.longitude]}\n              radius={6} fillColor=\"#009800\" fillOpacity={0.8} weight={0}\n              eventHandlers={{\n                click: () => props.circleOnClick(d.street_section_id),\n              }}\n              key={d.street_section_id}>\n              <Popup>Street section ID: {d.street_section_id}</Popup>\n            </CircleMarker>\n          )\n        })\n      }\n      </MapContainer>\n    </div>\n  );\n}\n\nfunction SiteTitle(props) {\n  const s = streetAttributes[props.site];\n  return (\n    <p><i>\n      {s.street_name} between {s.cross_street_a} and {s.cross_street_b}.\n    </i></p>\n  );\n}\n\nfunction StreetSectionText(props) {\n  if (!props.site) {\n    return (\n      <div>\n        <p><i>\n          Select a street section by clicking on a green circle marker on the\n          map to view more information about walking movements at that site.\n        </i></p>\n      </div>\n    );\n  }\n  const minFlow = Math.min(...chartData[props.site].map((d) => d.pph));\n  const maxFlow = Math.max(...chartData[props.site].map((d) => d.pph));\n  const nUniqueDates = (new Set(chartData[props.site].map((d) => d.date))).size;\n  const nUniqueDays = (new Set(chartData[props.site].map((d) => d.day_of_week))).size;\n  const earliestHour = sorted(chartData[props.site].map((d) => d.time), true)[0].substring(0, 2);\n  const latestHour = parseInt(sorted(chartData[props.site].map((d) => d.time), false)[0].substring(0, 2)) + 1;\n  return (\n    <div>\n      <p>\n        Between {minFlow} and {maxFlow} people per hour have been surveyed\n        walking through this street section. Surveys have been undertaken\n        across {nUniqueDates} date{nUniqueDates > 1? 's' : ''},\n        including {nUniqueDays} day{nUniqueDates > 1? 's' : ''} of the week,\n        between the hours of {earliestHour}:00 and {latestHour}:00.\n      </p>\n    </div>\n  );\n}\n\nfunction DatasetInfoText(props) {\n  const csvLink = \"https://public-life-observations.s3.ap-southeast-2.amazonaws.com/datasets_csv.zip\";\n  const parquetLink = \"https://public-life-observations.s3.ap-southeast-2.amazonaws.com/datasets_parquet.zip\";\n  const ccaLink = \"https://creativecommons.org/licenses/by/4.0/legalcode\";\n  return (\n    <div>\n      <p>\n        The entire dataset, including disaggregations by footpath and direction,\n        is available to download as <a href={csvLink}>csv</a> or <a href={parquetLink}>parquet</a> files\n        as open data under a <a href={ccaLink} target=\"_blank\">Creative Commons Attribution 4.0</a> licence.\n      </p>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}