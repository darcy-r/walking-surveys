{"ast":null,"code":"import _objectSpread from\"/Users/darcyroche/Documents/cathracha is ti\\u0301reolai\\u0301ocht/public life observations/plo-viz-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{Group}from'@visx/group';import{Circle}from'@visx/shape';import{scaleLinear,scaleTime,scaleQuantize}from'@visx/scale';import{AxisLeft,AxisBottom}from'@visx/axis';import{GridRows,GridColumns}from'@visx/grid';import{schemeRdYlBu,interpolateRdYlBu}from'd3-scale-chromatic';import{useTooltip,withTooltip,Tooltip,defaultStyles}from'@visx/tooltip';import{WithTooltipProvidedProps}from'@visx/tooltip/lib/enhancers/withTooltip';// tooltip stuff\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var tooltipStyles=_objectSpread(_objectSpread({},defaultStyles),{},{minWidth:60,backgroundColor:'rgba(180,180,180,0.75)',color:'rgba(30,30,30,1)',fontSize:'0.8rem'});var tooltipTimeout;// Finally we'll embed it all in an SVG\nfunction ScatterPlot(props){// Define the graph dimensions and margins\nvar width=460;var height=490;var margin={top:0,bottom:30,left:0,right:20};// Then we'll create some bounds\nvar xMax=width-margin.left-margin.right;var yMax=height-margin.top-margin.bottom;// We'll make some helpers to get at the data we want\nvar x=function x(d){return Date.parse(\"2022-09-11T\"+d.time);};var y=function y(d){return d.pph;};var temperatureAccessor=function temperatureAccessor(d){return d.temperature_apparent;};// And then scale the graph by our data\nvar xScale=scaleTime({range:[0,xMax],round:true,domain:[Date.parse(\"2022-09-11T07:00:00\"),Date.parse(\"2022-09-11T22:00:00\")],// Math.max(...data.map(x))\npadding:0.4});var yScale=scaleLinear({range:[yMax,0],round:true,domain:[0,2400]// Math.max(...data.map(y))] // change this to an API fetch for max PPH\n});var temperatureRescaler=scaleLinear({range:[1,0],domain:[-2,38]// again TODO: fetch min and max apparent temperatures over API\n});// Compose together the scale and accessor functions to get point functions\nvar compose=function compose(scale,accessor){return function(data){return scale(accessor(data));};};var xPoint=compose(xScale,x);var yPoint=compose(yScale,y);var getTemperatureStandardised=compose(temperatureRescaler,temperatureAccessor);var temperatureColourScale=function temperatureColourScale(d){return interpolateRdYlBu(getTemperatureStandardised(d));};// set up tooltips\nvar _useTooltip=useTooltip({// initial tooltip state\ntooltipOpen:false,tooltipLeft:width/3,tooltipTop:height/3,tooltipData:'Move me with your mouse or finger'}),showTooltip=_useTooltip.showTooltip,hideTooltip=_useTooltip.hideTooltip,tooltipOpen=_useTooltip.tooltipOpen,tooltipData=_useTooltip.tooltipData,_useTooltip$tooltipLe=_useTooltip.tooltipLeft,tooltipLeft=_useTooltip$tooltipLe===void 0?0:_useTooltip$tooltipLe,_useTooltip$tooltipTo=_useTooltip.tooltipTop,tooltipTop=_useTooltip$tooltipTo===void 0?0:_useTooltip$tooltipTo;// render\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"svg\",{width:width,height:height,className:\"scatter-plot-chart\",children:[/*#__PURE__*/_jsx(GridRows,{scale:yScale,width:xMax,height:yMax,stroke:\"#e0e0e0\"}),/*#__PURE__*/_jsx(GridColumns,{scale:xScale,width:xMax,height:yMax,stroke:\"#e0e0e0\"}),/*#__PURE__*/_jsx(AxisBottom,{top:yMax,scale:xScale,numTicks:width>461?12:6}),/*#__PURE__*/_jsx(AxisLeft,{scale:yScale,numTicks:height>491?12:8}),/*#__PURE__*/_jsx(\"text\",{x:\"-70\",y:\"15\",transform:\"rotate(-90)\",fontSize:10,children:\"People per hour\"}),props.data.map(function(d,i){return/*#__PURE__*/_jsx(Group,{children:/*#__PURE__*/_jsx(Circle,{cx:xPoint(d),cy:yPoint(d)// {yMax - barHeight}\n,r:6,fill:temperatureColourScale(d),onMouseLeave:function onMouseLeave(){tooltipTimeout=window.setTimeout(function(){hideTooltip();},300);},onMouseMove:function onMouseMove(){if(tooltipTimeout)clearTimeout(tooltipTimeout);showTooltip({tooltipData:d,tooltipTop:yPoint(d)+30,tooltipLeft:xPoint(d)});}})},\"circle-\".concat(i));})]}),tooltipOpen&&tooltipData&&/*#__PURE__*/_jsxs(Tooltip,{top:tooltipTop,left:tooltipLeft,style:tooltipStyles,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tooltip-paragraph\",children:[\"PPH: \",tooltipData.pph]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tooltip-paragraph\",children:[tooltipData.time,/*#__PURE__*/_jsx(\"br\",{}),tooltipData.day_of_week,\", \",tooltipData.date,/*#__PURE__*/_jsx(\"br\",{}),\"Apparent temp: \",tooltipData.temperature_apparent,\"\\xBAC\"]})]})]});}export default ScatterPlot;","map":{"version":3,"names":["React","Group","Circle","scaleLinear","scaleTime","scaleQuantize","AxisLeft","AxisBottom","GridRows","GridColumns","schemeRdYlBu","interpolateRdYlBu","useTooltip","withTooltip","Tooltip","defaultStyles","WithTooltipProvidedProps","tooltipStyles","minWidth","backgroundColor","color","fontSize","tooltipTimeout","ScatterPlot","props","width","height","margin","top","bottom","left","right","xMax","yMax","x","d","Date","parse","time","y","pph","temperatureAccessor","temperature_apparent","xScale","range","round","domain","padding","yScale","temperatureRescaler","compose","scale","accessor","data","xPoint","yPoint","getTemperatureStandardised","temperatureColourScale","tooltipOpen","tooltipLeft","tooltipTop","tooltipData","showTooltip","hideTooltip","map","i","window","setTimeout","clearTimeout","day_of_week","date"],"sources":["/Users/darcyroche/Documents/cathracha is tíreolaíocht/public life observations/plo-viz-app/src/Plot.js"],"sourcesContent":["import React from 'react';\nimport { Group } from '@visx/group';\nimport { Circle } from '@visx/shape';\nimport { scaleLinear, scaleTime, scaleQuantize } from '@visx/scale';\nimport { AxisLeft, AxisBottom } from '@visx/axis';\nimport { GridRows, GridColumns } from '@visx/grid';\nimport { schemeRdYlBu, interpolateRdYlBu } from 'd3-scale-chromatic';\nimport { useTooltip, withTooltip, Tooltip, defaultStyles } from '@visx/tooltip';\nimport { WithTooltipProvidedProps } from '@visx/tooltip/lib/enhancers/withTooltip';\n\n// tooltip stuff\nconst tooltipStyles = {\n  ...defaultStyles,\n  minWidth: 60,\n  backgroundColor: 'rgba(180,180,180,0.75)',\n  color: 'rgba(30,30,30,1)',\n  fontSize: '0.8rem',\n};\nlet tooltipTimeout;\n\n// Finally we'll embed it all in an SVG\nfunction ScatterPlot(props) {\n  // Define the graph dimensions and margins\n  const width = 460;\n  const height = 490;\n  const margin = { top: 0, bottom: 30, left: 0, right: 20 };\n  // Then we'll create some bounds\n  const xMax = width - margin.left - margin.right;\n  const yMax = height - margin.top - margin.bottom;\n  // We'll make some helpers to get at the data we want\n  const x = d => Date.parse(\"2022-09-11T\" + d.time);\n  const y = d => d.pph;\n  const temperatureAccessor = d => d.temperature_apparent;\n  // And then scale the graph by our data\n  const xScale = scaleTime({\n    range: [0, xMax],\n    round: true,\n    domain: [Date.parse(\"2022-09-11T07:00:00\"), Date.parse(\"2022-09-11T22:00:00\")], // Math.max(...data.map(x))\n    padding: 0.4,\n  });\n  const yScale = scaleLinear({\n    range: [yMax, 0],\n    round: true,\n    domain: [0, 2400], // Math.max(...data.map(y))] // change this to an API fetch for max PPH\n  });\n  const temperatureRescaler = scaleLinear({\n    range: [1, 0],\n    domain: [-2, 38], // again TODO: fetch min and max apparent temperatures over API\n  })\n  // Compose together the scale and accessor functions to get point functions\n  const compose = (scale, accessor) => data => scale(accessor(data));\n  const xPoint = compose(xScale, x);\n  const yPoint = compose(yScale, y);\n  const getTemperatureStandardised = compose(temperatureRescaler, temperatureAccessor);\n  const temperatureColourScale = (d) => interpolateRdYlBu(getTemperatureStandardised(d))\n  // set up tooltips\n  const {\n    showTooltip,\n    hideTooltip,\n    tooltipOpen,\n    tooltipData,\n    tooltipLeft = 0,\n    tooltipTop = 0,\n  } = useTooltip({\n    // initial tooltip state\n    tooltipOpen: false,\n    tooltipLeft: width / 3,\n    tooltipTop: height / 3,\n    tooltipData: 'Move me with your mouse or finger',\n  });\n  // render\n  return (\n      <div>\n        <svg width={width} height={height} className=\"scatter-plot-chart\">\n        <GridRows scale={yScale} width={xMax} height={yMax} stroke=\"#e0e0e0\" />\n        <GridColumns scale={xScale} width={xMax} height={yMax} stroke=\"#e0e0e0\" />\n        <AxisBottom top={yMax} scale={xScale} numTicks={width > 461 ? 12 : 6} />\n        <AxisLeft scale={yScale} numTicks={height > 491 ? 12 : 8}/>\n        <text x=\"-70\" y=\"15\" transform=\"rotate(-90)\" fontSize={10}>\n          People per hour\n        </text>\n        {props.data.map((d, i) => {\n          return (\n            <Group key={`circle-${i}`}>\n              <Circle\n                cx={xPoint(d)}\n                cy={yPoint(d)} // {yMax - barHeight}\n                r={6}\n                fill={temperatureColourScale(d)}\n                onMouseLeave={() => {\n                  tooltipTimeout = window.setTimeout(() => {\n                    hideTooltip();\n                  }, 300);\n                }}\n                onMouseMove={() => {\n                  if (tooltipTimeout) clearTimeout(tooltipTimeout);\n                  showTooltip({\n                    tooltipData: d,\n                    tooltipTop: yPoint(d) + 30,\n                    tooltipLeft: xPoint(d),\n                  });\n                }}\n              />\n            </Group>\n          );\n        })}\n        </svg>\n\n        {tooltipOpen && tooltipData && (\n          <Tooltip top={tooltipTop} left={tooltipLeft} style={tooltipStyles}>\n            <div className=\"tooltip-paragraph\">\n              PPH: {tooltipData.pph}\n            </div>\n            <div className=\"tooltip-paragraph\">\n              {tooltipData.time}<br/>\n              {tooltipData.day_of_week}, {tooltipData.date}<br/>\n              Apparent temp: {tooltipData.temperature_apparent}ºC\n            </div>\n          </Tooltip>\n        )}\n      </div>\n  );\n}\n\nexport default ScatterPlot;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}