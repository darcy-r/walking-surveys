{"ast":null,"code":"import { Transform } from 'vega-dataflow';\nimport { inherits } from 'vega-util';\nimport { Delaunay } from 'd3-delaunay';\n\nfunction Voronoi(params) {\n  Transform.call(this, null, params);\n}\n\nVoronoi.Definition = {\n  'type': 'Voronoi',\n  'metadata': {\n    'modifies': true\n  },\n  'params': [{\n    'name': 'x',\n    'type': 'field',\n    'required': true\n  }, {\n    'name': 'y',\n    'type': 'field',\n    'required': true\n  }, {\n    'name': 'size',\n    'type': 'number',\n    'array': true,\n    'length': 2\n  }, {\n    'name': 'extent',\n    'type': 'array',\n    'array': true,\n    'length': 2,\n    'default': [[-1e5, -1e5], [1e5, 1e5]],\n    'content': {\n      'type': 'number',\n      'array': true,\n      'length': 2\n    }\n  }, {\n    'name': 'as',\n    'type': 'string',\n    'default': 'path'\n  }]\n};\nconst defaultExtent = [-1e5, -1e5, 1e5, 1e5];\ninherits(Voronoi, Transform, {\n  transform(_, pulse) {\n    const as = _.as || 'path',\n          data = pulse.source; // nothing to do if no data\n\n    if (!data || !data.length) return pulse; // configure and construct voronoi diagram\n\n    let s = _.size;\n    s = s ? [0, 0, s[0], s[1]] : (s = _.extent) ? [s[0][0], s[0][1], s[1][0], s[1][1]] : defaultExtent;\n    const voronoi = this.value = Delaunay.from(data, _.x, _.y).voronoi(s); // map polygons to paths\n\n    for (let i = 0, n = data.length; i < n; ++i) {\n      const polygon = voronoi.cellPolygon(i);\n      data[i][as] = polygon ? toPathString(polygon) : null;\n    }\n\n    return pulse.reflow(_.modified()).modifies(as);\n  }\n\n}); // suppress duplicated end point vertices\n\nfunction toPathString(p) {\n  const x = p[0][0],\n        y = p[0][1];\n  let n = p.length - 1;\n\n  for (; p[n][0] === x && p[n][1] === y; --n);\n\n  return 'M' + p.slice(0, n + 1).join('L') + 'Z';\n}\n\nexport { Voronoi as voronoi };","map":{"version":3,"names":["Transform","inherits","Delaunay","Voronoi","params","call","Definition","defaultExtent","transform","_","pulse","as","data","source","length","s","size","extent","voronoi","value","from","x","y","i","n","polygon","cellPolygon","toPathString","reflow","modified","modifies","p","slice","join"],"sources":["/Users/darcyroche/Documents/cathracha is tíreolaíocht/public life observations/plo-viz-app/node_modules/vega-voronoi/build/vega-voronoi.module.js"],"sourcesContent":["import { Transform } from 'vega-dataflow';\nimport { inherits } from 'vega-util';\nimport { Delaunay } from 'd3-delaunay';\n\nfunction Voronoi(params) {\n  Transform.call(this, null, params);\n}\nVoronoi.Definition = {\n  'type': 'Voronoi',\n  'metadata': {\n    'modifies': true\n  },\n  'params': [{\n    'name': 'x',\n    'type': 'field',\n    'required': true\n  }, {\n    'name': 'y',\n    'type': 'field',\n    'required': true\n  }, {\n    'name': 'size',\n    'type': 'number',\n    'array': true,\n    'length': 2\n  }, {\n    'name': 'extent',\n    'type': 'array',\n    'array': true,\n    'length': 2,\n    'default': [[-1e5, -1e5], [1e5, 1e5]],\n    'content': {\n      'type': 'number',\n      'array': true,\n      'length': 2\n    }\n  }, {\n    'name': 'as',\n    'type': 'string',\n    'default': 'path'\n  }]\n};\nconst defaultExtent = [-1e5, -1e5, 1e5, 1e5];\ninherits(Voronoi, Transform, {\n  transform(_, pulse) {\n    const as = _.as || 'path',\n          data = pulse.source; // nothing to do if no data\n\n    if (!data || !data.length) return pulse; // configure and construct voronoi diagram\n\n    let s = _.size;\n    s = s ? [0, 0, s[0], s[1]] : (s = _.extent) ? [s[0][0], s[0][1], s[1][0], s[1][1]] : defaultExtent;\n    const voronoi = this.value = Delaunay.from(data, _.x, _.y).voronoi(s); // map polygons to paths\n\n    for (let i = 0, n = data.length; i < n; ++i) {\n      const polygon = voronoi.cellPolygon(i);\n      data[i][as] = polygon ? toPathString(polygon) : null;\n    }\n\n    return pulse.reflow(_.modified()).modifies(as);\n  }\n\n}); // suppress duplicated end point vertices\n\nfunction toPathString(p) {\n  const x = p[0][0],\n        y = p[0][1];\n  let n = p.length - 1;\n\n  for (; p[n][0] === x && p[n][1] === y; --n);\n\n  return 'M' + p.slice(0, n + 1).join('L') + 'Z';\n}\n\nexport { Voronoi as voronoi };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}