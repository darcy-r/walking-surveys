{"ast":null,"code":"var _excluded = [\"verticalAnchor\", \"scaleToFit\", \"angle\", \"width\", \"lineHeight\", \"capHeight\", \"children\", \"style\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useMemo } from 'react';\nimport reduceCSSCalc from 'reduce-css-calc';\nimport getStringWidth from '../util/getStringWidth';\n\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\nfunction isXOrYInValid(xOrY) {\n  return (// number that is not NaN or Infinity\n    typeof xOrY === 'number' && Number.isFinite(xOrY) || // for percentage\n    typeof xOrY === 'string'\n  );\n}\n\nexport default function useText(props) {\n  var _props$verticalAnchor = props.verticalAnchor,\n      verticalAnchor = _props$verticalAnchor === void 0 ? 'end' : _props$verticalAnchor,\n      _props$scaleToFit = props.scaleToFit,\n      scaleToFit = _props$scaleToFit === void 0 ? false : _props$scaleToFit,\n      angle = props.angle,\n      width = props.width,\n      _props$lineHeight = props.lineHeight,\n      lineHeight = _props$lineHeight === void 0 ? '1em' : _props$lineHeight,\n      _props$capHeight = props.capHeight,\n      capHeight = _props$capHeight === void 0 ? '0.71em' : _props$capHeight,\n      children = props.children,\n      style = props.style,\n      textProps = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var _textProps$x = textProps.x,\n      x = _textProps$x === void 0 ? 0 : _textProps$x,\n      _textProps$y = textProps.y,\n      y = _textProps$y === void 0 ? 0 : _textProps$y;\n  var isXOrYNotValid = !isXOrYInValid(x) || !isXOrYInValid(y);\n\n  var _useMemo = useMemo(function () {\n    var words = children == null ? [] : children.toString().split(/(?:(?!\\u00A0+)\\s+)/);\n    return {\n      wordsWithWidth: words.map(function (word) {\n        return {\n          word: word,\n          wordWidth: getStringWidth(word, style) || 0\n        };\n      }),\n      spaceWidth: getStringWidth(\"\\xA0\", style) || 0\n    };\n  }, [children, style]),\n      wordsWithWidth = _useMemo.wordsWithWidth,\n      spaceWidth = _useMemo.spaceWidth;\n\n  var wordsByLines = useMemo(function () {\n    if (isXOrYNotValid) {\n      return [];\n    } // Only perform calculations if using features that require them (multiline, scaleToFit)\n\n\n    if (width || scaleToFit) {\n      return wordsWithWidth.reduce(function (result, _ref) {\n        var word = _ref.word,\n            wordWidth = _ref.wordWidth;\n        var currentLine = result[result.length - 1];\n\n        if (currentLine && (width == null || scaleToFit || (currentLine.width || 0) + wordWidth + spaceWidth < width)) {\n          // Word can be added to an existing line\n          currentLine.words.push(word);\n          currentLine.width = currentLine.width || 0;\n          currentLine.width += wordWidth + spaceWidth;\n        } else {\n          // Add first word to line or word is too long to scaleToFit on existing line\n          var newLine = {\n            words: [word],\n            width: wordWidth\n          };\n          result.push(newLine);\n        }\n\n        return result;\n      }, []);\n    }\n\n    return [{\n      words: children == null ? [] : children.toString().split(/(?:(?!\\u00A0+)\\s+)/)\n    }];\n  }, [isXOrYNotValid, width, scaleToFit, children, wordsWithWidth, spaceWidth]);\n  var startDy = useMemo(function () {\n    var startDyStr = isXOrYNotValid ? '' : verticalAnchor === 'start' ? reduceCSSCalc(\"calc(\" + capHeight + \")\") : verticalAnchor === 'middle' ? reduceCSSCalc(\"calc(\" + (wordsByLines.length - 1) / 2 + \" * -\" + lineHeight + \" + (\" + capHeight + \" / 2))\") : reduceCSSCalc(\"calc(\" + (wordsByLines.length - 1) + \" * -\" + lineHeight + \")\");\n    return startDyStr;\n  }, [isXOrYNotValid, verticalAnchor, capHeight, wordsByLines.length, lineHeight]);\n  var transform = useMemo(function () {\n    var transforms = [];\n\n    if (isXOrYNotValid) {\n      return '';\n    }\n\n    if (isNumber(x) && isNumber(y) && isNumber(width) && scaleToFit && wordsByLines.length > 0) {\n      var lineWidth = wordsByLines[0].width || 1;\n      var sx = scaleToFit === 'shrink-only' ? Math.min(width / lineWidth, 1) : width / lineWidth;\n      var sy = sx;\n      var originX = x - sx * x;\n      var originY = y - sy * y;\n      transforms.push(\"matrix(\" + sx + \", 0, 0, \" + sy + \", \" + originX + \", \" + originY + \")\");\n    }\n\n    if (angle) {\n      transforms.push(\"rotate(\" + angle + \", \" + x + \", \" + y + \")\");\n    }\n\n    return transforms.length > 0 ? transforms.join(' ') : '';\n  }, [isXOrYNotValid, x, y, width, scaleToFit, wordsByLines, angle]);\n  return {\n    wordsByLines: wordsByLines,\n    startDy: startDy,\n    transform: transform\n  };\n}","map":{"version":3,"names":["_excluded","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","React","useMemo","reduceCSSCalc","getStringWidth","isNumber","val","isXOrYInValid","xOrY","Number","isFinite","useText","props","_props$verticalAnchor","verticalAnchor","_props$scaleToFit","scaleToFit","angle","width","_props$lineHeight","lineHeight","_props$capHeight","capHeight","children","style","textProps","_textProps$x","x","_textProps$y","y","isXOrYNotValid","_useMemo","words","toString","split","wordsWithWidth","map","word","wordWidth","spaceWidth","wordsByLines","reduce","result","_ref","currentLine","push","newLine","startDy","startDyStr","transform","transforms","lineWidth","sx","Math","min","sy","originX","originY","join"],"sources":["/Users/darcyroche/Documents/cathracha is tíreolaíocht/public life observations/plo-viz-app/node_modules/@visx/text/esm/hooks/useText.js"],"sourcesContent":["var _excluded = [\"verticalAnchor\", \"scaleToFit\", \"angle\", \"width\", \"lineHeight\", \"capHeight\", \"children\", \"style\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useMemo } from 'react';\nimport reduceCSSCalc from 'reduce-css-calc';\nimport getStringWidth from '../util/getStringWidth';\n\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\nfunction isXOrYInValid(xOrY) {\n  return (// number that is not NaN or Infinity\n    typeof xOrY === 'number' && Number.isFinite(xOrY) || // for percentage\n    typeof xOrY === 'string'\n  );\n}\n\nexport default function useText(props) {\n  var _props$verticalAnchor = props.verticalAnchor,\n      verticalAnchor = _props$verticalAnchor === void 0 ? 'end' : _props$verticalAnchor,\n      _props$scaleToFit = props.scaleToFit,\n      scaleToFit = _props$scaleToFit === void 0 ? false : _props$scaleToFit,\n      angle = props.angle,\n      width = props.width,\n      _props$lineHeight = props.lineHeight,\n      lineHeight = _props$lineHeight === void 0 ? '1em' : _props$lineHeight,\n      _props$capHeight = props.capHeight,\n      capHeight = _props$capHeight === void 0 ? '0.71em' : _props$capHeight,\n      children = props.children,\n      style = props.style,\n      textProps = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var _textProps$x = textProps.x,\n      x = _textProps$x === void 0 ? 0 : _textProps$x,\n      _textProps$y = textProps.y,\n      y = _textProps$y === void 0 ? 0 : _textProps$y;\n  var isXOrYNotValid = !isXOrYInValid(x) || !isXOrYInValid(y);\n\n  var _useMemo = useMemo(function () {\n    var words = children == null ? [] : children.toString().split(/(?:(?!\\u00A0+)\\s+)/);\n    return {\n      wordsWithWidth: words.map(function (word) {\n        return {\n          word: word,\n          wordWidth: getStringWidth(word, style) || 0\n        };\n      }),\n      spaceWidth: getStringWidth(\"\\xA0\", style) || 0\n    };\n  }, [children, style]),\n      wordsWithWidth = _useMemo.wordsWithWidth,\n      spaceWidth = _useMemo.spaceWidth;\n\n  var wordsByLines = useMemo(function () {\n    if (isXOrYNotValid) {\n      return [];\n    } // Only perform calculations if using features that require them (multiline, scaleToFit)\n\n\n    if (width || scaleToFit) {\n      return wordsWithWidth.reduce(function (result, _ref) {\n        var word = _ref.word,\n            wordWidth = _ref.wordWidth;\n        var currentLine = result[result.length - 1];\n\n        if (currentLine && (width == null || scaleToFit || (currentLine.width || 0) + wordWidth + spaceWidth < width)) {\n          // Word can be added to an existing line\n          currentLine.words.push(word);\n          currentLine.width = currentLine.width || 0;\n          currentLine.width += wordWidth + spaceWidth;\n        } else {\n          // Add first word to line or word is too long to scaleToFit on existing line\n          var newLine = {\n            words: [word],\n            width: wordWidth\n          };\n          result.push(newLine);\n        }\n\n        return result;\n      }, []);\n    }\n\n    return [{\n      words: children == null ? [] : children.toString().split(/(?:(?!\\u00A0+)\\s+)/)\n    }];\n  }, [isXOrYNotValid, width, scaleToFit, children, wordsWithWidth, spaceWidth]);\n  var startDy = useMemo(function () {\n    var startDyStr = isXOrYNotValid ? '' : verticalAnchor === 'start' ? reduceCSSCalc(\"calc(\" + capHeight + \")\") : verticalAnchor === 'middle' ? reduceCSSCalc(\"calc(\" + (wordsByLines.length - 1) / 2 + \" * -\" + lineHeight + \" + (\" + capHeight + \" / 2))\") : reduceCSSCalc(\"calc(\" + (wordsByLines.length - 1) + \" * -\" + lineHeight + \")\");\n    return startDyStr;\n  }, [isXOrYNotValid, verticalAnchor, capHeight, wordsByLines.length, lineHeight]);\n  var transform = useMemo(function () {\n    var transforms = [];\n\n    if (isXOrYNotValid) {\n      return '';\n    }\n\n    if (isNumber(x) && isNumber(y) && isNumber(width) && scaleToFit && wordsByLines.length > 0) {\n      var lineWidth = wordsByLines[0].width || 1;\n      var sx = scaleToFit === 'shrink-only' ? Math.min(width / lineWidth, 1) : width / lineWidth;\n      var sy = sx;\n      var originX = x - sx * x;\n      var originY = y - sy * y;\n      transforms.push(\"matrix(\" + sx + \", 0, 0, \" + sy + \", \" + originX + \", \" + originY + \")\");\n    }\n\n    if (angle) {\n      transforms.push(\"rotate(\" + angle + \", \" + x + \", \" + y + \")\");\n    }\n\n    return transforms.length > 0 ? transforms.join(' ') : '';\n  }, [isXOrYNotValid, x, y, width, scaleToFit, wordsByLines, angle]);\n  return {\n    wordsByLines: wordsByLines,\n    startDy: startDy,\n    transform: transform\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}