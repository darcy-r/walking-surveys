{"ast":null,"code":"var _jsxFileName = \"/Users/darcyroche/Documents/cathracha is ti\\u0301reolai\\u0301ocht/public life observations/plo-viz-app/src/App.js\";\nimport React from 'react';\nimport { MapContainer, TileLayer, useMap, CircleMarker, Popup } from 'react-leaflet';\nimport ScatterPlot from './Plot.js';\nimport streetGeometries from './street_locations.json';\nimport streetAttributes from './street_attributes.json';\nimport chartData from './chart_data.json';\nimport './App.css';\nimport 'leaflet/dist/leaflet.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst sorted = (l, ascending) => {\n  let c = [...l];\n  c.sort();\n\n  if (!ascending) {\n    c.reverse();\n  }\n\n  return c;\n};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedSite: null,\n      hoveredNode: null\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(ID) {\n    this.setState({\n      selectedSite: ID\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(SiteLocationsMap, {\n        circleOnClick: ID => this.handleChange(ID)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"visualisation-pane\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"visualisation-pane-content\",\n          children: [this.state.selectedSite && /*#__PURE__*/_jsxDEV(ScatterPlot, {\n            data: chartData[this.state.selectedSite]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(StreetSectionText, {\n            site: this.state.selectedSite\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nfunction SiteLocationsMap(props) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(MapContainer, {\n      id: \"map-pane\",\n      center: [-33.87319087719761, 151.20681949733816],\n      zoom: 13,\n      zoomControl: false,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OSM</a> contributors, <a href=\\\"https://carto.com/attributions\\\">CARTO</a>\",\n        url: \"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }, this), streetGeometries.map(d => {\n        return /*#__PURE__*/_jsxDEV(CircleMarker, {\n          center: [d.latitude, d.longitude],\n          radius: 6,\n          fillColor: \"#009800\",\n          fillOpacity: 0.8,\n          weight: 0,\n          eventHandlers: {\n            click: () => props.circleOnClick(d.street_section_id)\n          },\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            children: [\"Street section ID: \", d.street_section_id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 15\n          }, this)\n        }, d.street_section_id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n\n_c = SiteLocationsMap;\n\nfunction StreetSectionText(props) {\n  if (!props.site) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          children: \"Select a street section by clicking on a green circle marker on the map to view more information about walking movements at that site.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n\n  const minFlow = Math.min(...chartData[props.site].map(d => d.pph));\n  const maxFlow = Math.min(...chartData[props.site].map(d => d.pph));\n  const nUniqueDates = new Set(chartData[props.site].map(d => d.date)).size;\n  const nUniqueDays = new Set(chartData[props.site].map(d => d.day_of_week)).size;\n  const earliestHour = sorted(chartData[props.site].map(d => d.time), true)[0].substring(0, 2);\n  const latestHour = parseInt(sorted(chartData[props.site].map(d => d.time), false)[0].substring(0, 2)) + 1;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        children: [streetAttributes[props.site]['street_name'], \" between \", streetAttributes[props.site]['cross_street_a'], \" and \", streetAttributes[props.site]['cross_street_b'], \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 10\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Between \", minFlow, \" and \", maxFlow, \" people per hour have been surveyed walking through this street section. Surveys have been undertaken across \", nUniqueDates, \" date\", nUniqueDates > 1 ? 's' : '', \", including \", nUniqueDays, \" day\", nUniqueDates > 1 ? 's' : '', \" of the week, between the hours of \", earliestHour, \":00 and \", latestHour, \":00.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"The entire dataset, including disaggregations by footpath and direction, is available to download \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://public-life-observations.s3.ap-southeast-2.amazonaws.com/parquet/movements.parquet\",\n        children: \"here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 18\n      }, this), \" as open data under a \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://creativecommons.org/licenses/by/4.0/legalcode\",\n        children: \"Creative Commons Attribution 4.0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this), \" licence.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n} // function SiteSelector(props) {\n//   const options = Object.keys(chartData).map((k) => {\n//     return (\n//       <option key={k} value={k}>{k}</option>\n//     )\n//   });\n//   return (\n//     <form>\n//       <label>\n//         Select your site:\n//         <select value={props.value} onChange={(e) => props.onChange(e.target.value)}>\n//           {options}\n//         </select>\n//       </label>\n//     </form>\n//   );\n// }\n\n\n_c2 = StreetSectionText;\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SiteLocationsMap\");\n$RefreshReg$(_c2, \"StreetSectionText\");","map":{"version":3,"names":["React","MapContainer","TileLayer","useMap","CircleMarker","Popup","ScatterPlot","streetGeometries","streetAttributes","chartData","sorted","l","ascending","c","sort","reverse","App","Component","constructor","props","state","selectedSite","hoveredNode","handleChange","bind","ID","setState","render","SiteLocationsMap","map","d","latitude","longitude","click","circleOnClick","street_section_id","StreetSectionText","site","minFlow","Math","min","pph","maxFlow","nUniqueDates","Set","date","size","nUniqueDays","day_of_week","earliestHour","time","substring","latestHour","parseInt"],"sources":["/Users/darcyroche/Documents/cathracha is tíreolaíocht/public life observations/plo-viz-app/src/App.js"],"sourcesContent":["import React from 'react';\nimport { MapContainer, TileLayer, useMap, CircleMarker, Popup } from 'react-leaflet'\nimport ScatterPlot from './Plot.js';\nimport streetGeometries from './street_locations.json';\nimport streetAttributes from './street_attributes.json';\nimport chartData from './chart_data.json';\nimport './App.css';\nimport 'leaflet/dist/leaflet.css';\n\nconst sorted = (l, ascending) => {\n  let c = [...l];\n  c.sort();\n  if (!ascending) {\n    c.reverse()\n  }\n  return c;\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedSite: null,\n      hoveredNode: null,\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(ID) {\n    this.setState({selectedSite: ID});\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <SiteLocationsMap circleOnClick={(ID) => this.handleChange(ID)} />\n        <div id=\"visualisation-pane\">\n          <div id=\"visualisation-pane-content\">\n            {/* <SiteSelector value={this.state.selectedSite} onChange={(ID) => this.handleChange(ID)}/> */}\n            {this.state.selectedSite && <ScatterPlot data={chartData[this.state.selectedSite]} />}\n            <StreetSectionText site={this.state.selectedSite} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction SiteLocationsMap(props) {\n  return (\n    <div>\n      <MapContainer id=\"map-pane\" center={[-33.87319087719761, 151.20681949733816]} zoom={13} zoomControl={false}>\n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OSM</a> contributors, <a href=\"https://carto.com/attributions\">CARTO</a>'\n        url=\"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\"\n      />\n      {\n        streetGeometries.map((d) => {\n          return (\n            <CircleMarker\n              center={[d.latitude, d.longitude]}\n              radius={6} fillColor=\"#009800\" fillOpacity={0.8} weight={0}\n              eventHandlers={{\n                click: () => props.circleOnClick(d.street_section_id),\n              }}\n              key={d.street_section_id}>\n              <Popup>Street section ID: {d.street_section_id}</Popup>\n            </CircleMarker>\n          )\n        })\n      }\n      </MapContainer>\n    </div>\n  );\n}\n\nfunction StreetSectionText(props) {\n  if (!props.site) {\n    return (\n      <div>\n        <p><i>\n          Select a street section by clicking on a green circle marker on the\n          map to view more information about walking movements at that site.\n        </i></p>\n      </div>\n    );\n  }\n  const minFlow = Math.min(...chartData[props.site].map((d) => d.pph));\n  const maxFlow = Math.min(...chartData[props.site].map((d) => d.pph));\n  const nUniqueDates = (new Set(chartData[props.site].map((d) => d.date))).size;\n  const nUniqueDays = (new Set(chartData[props.site].map((d) => d.day_of_week))).size;\n  const earliestHour = sorted(chartData[props.site].map((d) => d.time), true)[0].substring(0, 2);\n  const latestHour = parseInt(sorted(chartData[props.site].map((d) => d.time), false)[0].substring(0, 2)) + 1;\n  return (\n    <div>\n      <p><i>{streetAttributes[props.site]['street_name']} between {streetAttributes[props.site]['cross_street_a']} and {streetAttributes[props.site]['cross_street_b']}.</i></p>\n      <p>\n        Between {minFlow} and {maxFlow} people per hour have been surveyed\n        walking through this street section. Surveys have been undertaken\n        across {nUniqueDates} date{nUniqueDates > 1? 's' : ''},\n        including {nUniqueDays} day{nUniqueDates > 1? 's' : ''} of the week,\n        between the hours of {earliestHour}:00 and {latestHour}:00.\n      </p>\n      <p>\n        The entire dataset, including disaggregations by footpath and direction, is available to\n        download <a href=\"https://public-life-observations.s3.ap-southeast-2.amazonaws.com/parquet/movements.parquet\">here</a> as\n        open data under\n        a <a href=\"https://creativecommons.org/licenses/by/4.0/legalcode\">Creative Commons Attribution 4.0</a> licence.\n      </p>\n    </div>\n  );\n}\n\n// function SiteSelector(props) {\n//   const options = Object.keys(chartData).map((k) => {\n//     return (\n//       <option key={k} value={k}>{k}</option>\n//     )\n//   });\n//   return (\n//     <form>\n//       <label>\n//         Select your site:\n//         <select value={props.value} onChange={(e) => props.onChange(e.target.value)}>\n//           {options}\n//         </select>\n//       </label>\n//     </form>\n//   );\n// }\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}